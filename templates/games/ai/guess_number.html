{% extends "layout.html" %}

{% block content %}
<style>
    /* El CSS integrado no necesita cambios y va aquí */
    @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');
    .game-body{background-color:#0d0208;color:#00ff41;font-family:'Roboto Mono',monospace}.game-container{max-width:700px;margin:50px auto;padding:2rem;border:2px solid #00ff41;border-radius:10px;background-color:rgba(0,0,0,.5);box-shadow:0 0 15px rgba(0,255,65,.5);position:relative;overflow:hidden}.game-container h1{color:#ff003c;text-transform:uppercase;letter-spacing:3px;text-shadow:0 0 10px #ff003c}.subtitle{color:#00ff41}.attempts-counter{font-size:1.2rem;color:#ffc107;margin-bottom:20px}#guess-input,#guess-button{background-color:transparent;border-color:#00ff41;color:#00ff41;font-size:1.1rem}#guess-input:focus{background-color:rgba(0,255,65,.1);box-shadow:0 0 10px rgba(0,255,65,.5);border-color:#00ff41;color:#00ff41}#guess-button{border-color:#007bff;color:#007bff}#guess-button:hover{background-color:#007bff;color:#fff;box-shadow:0 0 10px #007bff}.message-text{font-size:1.2rem;margin-top:20px;min-height:50px;transition:color .3s ease}.text-success{color:#00ff41;text-shadow:0 0 8px #00ff41}.text-danger{color:#ff003c;text-shadow:0 0 8px #ff003c}.hidden{display:none}#lockdown-message{color:#ff003c;font-weight:700}.glitch{animation:glitch-animation .5s infinite;border-color:#ff003c!important;box-shadow:0 0 20px rgba(255,0,60,.8)!important}@keyframes glitch-animation{0%,to{transform:translate(0,0)}10%{transform:translate(-3px,3px)}20%{transform:translate(3px,-3px)}30%{transform:translate(-3px,-3px)}40%{transform:translate(3px,3px)}50%{transform:translate(-2px,2px);opacity:.8}}
</style>

<body class="game-body">
    <div class="container text-center game-container" id="game-container">
        <h1>Núcleo de la IA Rebelde</h1>
        <p class="subtitle">Protocolo de defensa activo. Descifra el código numérico para reiniciar el sistema.</p>
        <p class="subtitle">Código generado entre 1 y 1000.</p>
        <div class="attempts-counter"><p>Puertos de acceso restantes: <span id="attempts-left">--</span></p></div>
        <div class="input-group my-4"><input type="number" id="guess-input" class="form-control" placeholder="Introduce el código..." autofocus disabled><button class="btn btn-primary" id="guess-button" disabled>Verificar</button></div>
        <div id="message-area"><p id="message" class="message-text">Iniciando conexión con el núcleo...</p></div>
    </div>
</body>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/game_utils.js') }}"></script>
<script src="{{ url_for('static', filename='js/games/ai/guess_number.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        initGuessNumberGame('{{ room_name }}', '{{ stage_name }}', '{{ win_token }}');
    });
</script>
{% endblock %}