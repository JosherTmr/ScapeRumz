function initHangmanGame(roomName,stageName,winToken){const stageText=document.querySelector(".stage-text");const wordDisplay=document.querySelector(".word-display");const guessesText=document.querySelector(".guesses-text b");const keyboardDiv=document.querySelector(".keyboard");const hangmanImage=document.querySelector(".hangman-box img");const gameModal=document.querySelector(".game-modal");const modalContent=gameModal.querySelector(".content");let currentWord,correctLetters,wrongGuessCount;let wordIndex=0;let sessionWords=[];const maxGuesses=6;const setupNextWord=()=>{const{word,hint}=sessionWords[wordIndex];currentWord=word;stageText.innerText=`Palabra ${wordIndex + 1} de 3`;document.querySelector(".hint-text b").innerText=hint;correctLetters=[];wrongGuessCount=0;hangmanImage.src=`https://www-codingnepalweb-com.translate.goog/demos/build-hangman-game-html-javascript/images/hangman-0.svg`;guessesText.innerText=`${wrongGuessCount} / ${maxGuesses}`;wordDisplay.innerHTML=currentWord.split("").map(()=>`<li class="letter"></li>`).join("");keyboardDiv.querySelectorAll("button").forEach(btn=>btn.disabled=false);gameModal.classList.remove("show");}
const selectSessionWords=()=>{const wordList=[{word:"CREEPER",hint:"Me acerco en silencio, exploto sin avisar y todos me temen."},{word:"PIEDRA",hint:"Soy abundante bajo tus pies, duro como roca, pero fácil de romper con un pico."},{word:"REDSTONE",hint:"No soy sangre, pero puedo dar energía y hacer máquinas."},{word:"ENDERMAN",hint:"Si me miras a los ojos me enojo, pero me gusta mover bloques."},{word:"PORTAL",hint:"Sin mí no puedes viajar al Nether ni al End."},{word:"LAVA",hint:"Brillo como el sol, quemo como el fuego, y en mí no debes caer."},{word:"YUNQUE",hint:"Soy pesado, sirvo para reparar, y si caigo desde lo alto puedo aplastarte."},{word:"LANA",hint:"Lo obtienes de una oveja, con él fabricas tu primera cama."},{word:"ESPADA",hint:"No soy pico ni hacha, pero me usas para defenderte."},{word:"ALDEA",hint:"Lugar donde encuentras casas, cultivos y seres que hacen trueques."},];sessionWords=wordList.sort(()=>0.5-Math.random()).slice(0,3);setupNextWord();}
const gameOver=(isVictory)=>{if(!isVictory){setTimeout(()=>{modalContent.querySelector("img").src=`https://www-codingnepalweb-com.translate.goog/demos/build-hangman-game-html-javascript/images/lost.gif`;modalContent.querySelector("h4").innerText='¡Ahorcado!';modalContent.querySelector("p").innerHTML=`La palabra correcta era: <b>${currentWord}</b>`;gameModal.classList.add("show");setTimeout(()=>failGame("Te has quedado sin intentos.",roomName),2500);},300);return;}
if(wordIndex<2){wordIndex++;setTimeout(()=>{modalContent.querySelector("img").src=`https://www-codingnepalweb-com.translate.goog/demos/build-hangman-game-html-javascript/images/victory.gif`;modalContent.querySelector("h4").innerText='¡Correcto!';modalContent.querySelector("p").innerHTML=`Prepárate para la siguiente palabra...`;gameModal.classList.add("show");setTimeout(setupNextWord,2000);},300);}else{setTimeout(()=>{modalContent.querySelector("img").src=`https://www-codingnepalweb-com.translate.goog/demos/build-hangman-game-html-javascript/images/victory.gif`;modalContent.querySelector("h4").innerText='¡Desafío Superado!';modalContent.querySelector("p").innerHTML=`Has adivinado todas las palabras.`;gameModal.classList.add("show");setTimeout(()=>submitWin(roomName,stageName,winToken),2000);},300);}}
const initGame=(e)=>{const clickedLetter=e.target.value;if(clickedLetter.match(/^[A-Z]$/)&&!e.target.disabled){e.target.disabled=true;if(currentWord.includes(clickedLetter)){[...currentWord].forEach((letter,index)=>{if(letter===clickedLetter){correctLetters.push(letter);wordDisplay.querySelectorAll("li")[index].innerText=letter;wordDisplay.querySelectorAll("li")[index].classList.add("guessed");}});}else{wrongGuessCount++;hangmanImage.src=`https://www-codingnepalweb-com.translate.goog/demos/build-hangman-game-html-javascript/images/hangman-${wrongGuessCount}.svg`;}
guessesText.innerText=`${wrongGuessCount} / ${maxGuesses}`;if(wrongGuessCount===maxGuesses)return gameOver(false);if(correctLetters.length===currentWord.length)return gameOver(true);}}
for(let i=65;i<=90;i++){const button=document.createElement("button");button.value=String.fromCharCode(i);button.innerText=String.fromCharCode(i);keyboardDiv.appendChild(button);button.addEventListener("click",initGame);}
selectSessionWords();}